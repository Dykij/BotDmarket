.. _refactoring:

Рефакторинг проекта
=================

Проведенные улучшения
------------------

1. **Объединение скриптов запуска бота**

   * Объединены файлы ``main.py``, ``run.py`` и ``run_bot.py`` в один улучшенный файл ``run_bot.py``
   * Добавлена расширенная обработка ошибок и система мониторинга
   * Добавлены аргументы командной строки и система логирования

2. **Упорядочивание тестовых файлов**

   * Перемещены файлы тестов из корня проекта в директорию ``tests/``
   * Созданы поддиректории для тестирования разных компонентов:
     
     * ``tests/dmarket/``
     * ``tests/telegram_bot/``
     * ``tests/utils/``

3. **Разделение функциональности**

   * Код автоматического арбитража выделен из ``setup.py`` в отдельный модуль ``src/dmarket/auto_arbitrage.py``
   * Файл ``setup.py`` обновлен для соответствия актуальным стандартам

4. **Объединение конфигурационных файлов**

   * Настройки из ``.ruff.toml``, ``.black.toml`` и ``mypy.ini`` перенесены в единый файл ``pyproject.toml``
   * Удалены дублирующие конфигурационные файлы

5. **Организация логов**

   * Создана единая система логирования
   * Все логи перемещены в директорию ``logs/``
   * Удалены пустые файлы логов

6. **Объединение дублирующихся тестов**

   * Созданы унифицированные файлы тестов по категориям:
     
     * ``tests/telegram_bot/test_bot_unified.py`` - тесты для Telegram-бота
     * ``tests/dmarket/test_api_unified.py`` - тесты для DMarket API
     * ``tests/test_arbitrage_unified.py`` - тесты для модулей арбитража

7. **Структурированная документация**

   * Создана структура документации на основе Sphinx
   * Документация разделена на пользовательскую и разработческую части
   * Добавлены руководства по установке, настройке и использованию

Будущие улучшения
--------------

1. **Документация**

   * Продолжить наполнение документации содержимым
   * Добавить автоматическую генерацию API-документации из docstrings
   * Добавить подробные инструкции по настройке окружения разработки

2. **Тесты**

   * Улучшить покрытие тестами
   * Настроить автоматическое тестирование с GitHub Actions
   * Добавить интеграционные тесты

3. **Структура проекта**

   * Унифицировать стиль кода во всем проекте
   * Провести глубокий рефакторинг модулей
   * Добавить аннотации типов для улучшения безопасности кода 