# Структура проекта DMarket Tools

В этом документе описана структура проекта DMarket Tools, роль каждой директории и основные компоненты системы.

## Общая структура

```
dmarket-tools/
├── src/                   # Основной код проекта
│   ├── dmarket/           # API клиент и логика работы с DMarket
│   ├── telegram_bot/      # Реализация Telegram-бота
│   └── utils/             # Вспомогательные модули и утилиты
├── tests/                 # Тесты
├── scripts/               # Примеры и утилиты
├── docs/                  # Документация
├── config/                # Конфигурационные файлы (устаревшие)
└── .env                   # Файл с переменными окружения (создать вручную)
```

## Основные компоненты

### src/ - Исходный код

#### src/dmarket/
- **dmarket_api.py** - Клиент для работы с DMarket API, включая генерацию подписей
- **arbitrage.py** - Логика для поиска арбитражных ситуаций
- **dmarket_api_patch.py** - Патч для расширения функциональности API клиента
- **game_filters.py** - Фильтры для различных игр (CS:GO, Dota 2, и т.д.)

#### src/telegram_bot/
- **bot.py** - Базовая версия Telegram-бота
- **bot_v2.py** - Расширенная версия бота с поддержкой арбитража
- **keyboards.py** - Генераторы клавиатур для Telegram-бота
- **auto_arbitrage.py** - Автоматический арбитраж через Telegram-бота
- **profiles.py** - Управление профилями пользователей

#### src/utils/
- **api_error_handling.py** - Обработка ошибок API
- **rate_limiter.py** - Управление лимитами запросов к API
- **dmarket_api_utils.py** - Вспомогательные функции для API

### tests/ - Тестирование
- Содержит автоматические тесты для всех компонентов системы
- **conftest.py** - Конфигурация pytest и фикстуры

### scripts/ - Скрипты и примеры
- Примеры использования API и различных компонентов системы
- Утилиты для отладки и демонстрации функциональности

### docs/ - Документация
- Руководства по использованию различных компонентов системы
- Инструкции по настройке и развертыванию

## Конфигурация

### Переменные окружения (.env)
- **DMARKET_PUBLIC_KEY** - Публичный ключ API DMarket
- **DMARKET_SECRET_KEY** - Секретный ключ API DMarket
- **TELEGRAM_BOT_TOKEN** - Токен для Telegram бота

### Настройки линтеров и статического анализа
- **mypy.ini** - Настройки статической проверки типов
- **pyrightconfig.json** - Настройки Pyright для VS Code
- **pyproject.toml** - Настройки pytest, Black, Ruff

## Рекомендации по разработке

1. **Модульность**: Придерживайтесь принципа модульности. Каждый файл должен содержать только один класс или логически связанные функции.
2. **Типизация**: Используйте аннотации типов для облегчения понимания кода и раннего обнаружения ошибок.
3. **Документация**: Документируйте публичные API с помощью docstrings.
4. **Тестирование**: Пишите тесты для новой функциональности.
