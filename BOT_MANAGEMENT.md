# Управление Telegram-ботом для DMarket

## Запуск бота

Для запуска бота в фоновом режиме выполните команду:

```bash
python start_bot_service.py
```

Эта команда запустит бота как отдельный процесс Windows. Информация о запуске будет сохранена в `bot_service.log`.

## Остановка бота

Для остановки бота выполните команду:

```bash
python stop_bot_service.py
```

Скрипт найдет процесс бота по файлу блокировки `bot.lock` и корректно завершит его работу.

## Перезапуск бота

Для перезапуска бота выполните следующие команды:

```bash
python stop_bot_service.py
python start_bot_service.py
```

## Проверка статуса

Чтобы проверить, запущен ли бот, выполните:

```powershell
Test-Path bot.lock  # Наличие файла блокировки
```

Если файл существует, бот, скорее всего, запущен. Чтобы проверить процесс:

```powershell
Get-Content bot.lock  # Получить PID процесса
$pid = Get-Content bot.lock
Get-Process -Id $pid -ErrorAction SilentlyContinue  # Проверить, существует ли процесс
```

## Просмотр логов

Логи запуска и остановки бота сохраняются в файле `bot_service.log`:

```powershell
Get-Content bot_service.log  # Просмотр всего лога
Get-Content bot_service.log -Tail 10  # Просмотр последних 10 строк
```

Логи работы самого бота сохраняются в файле `bot_log.txt`:

```powershell
Get-Content bot_log.txt -Tail 20  # Просмотр последних 20 строк лога бота
```

## Решение проблем

1. **Бот не запускается**:
   - Проверьте наличие файла `.env` с правильными API-ключами
   - Убедитесь, что все зависимости установлены
   - Проверьте логи в файлах `bot_service.log` и `bot_log.txt`

2. **Бот зависает**:
   - Остановите бота с помощью `stop_bot_service.py`
   - Удалите файл `bot.lock` если он остался
   - Запустите бота заново

3. **Файл блокировки остался, но процесс не существует**:
   - Удалите файл `bot.lock` вручную:
     ```powershell
     Remove-Item bot.lock
     ```
   - Запустите бота заново 